# TODO: grim-rs Implementation Roadmap

–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º grim.
–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: **~75%**

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–ü—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤:**

1. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥** - –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–∂–µ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π
2. **–ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥** - –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
3. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –∞–Ω–∞–ª–æ–≥–æ–≤** - –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–∫–∞—Ç—å –ø–æ—Ö–æ–∂—É—é –ª–æ–≥–∏–∫—É –≤:
   - `src/wayland_capture.rs` (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞—Ö–≤–∞—Ç–∞)
   - `src/geometry.rs` (—Ä–∞–±–æ—Ç–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏)
   - `src/lib.rs` (–ø—É–±–ª–∏—á–Ω—ã–π API)
4. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ > –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –µ—Å—Ç—å, –Ω–æ –≤ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–µ, –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –µ—ë –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

---

## üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏)

### 1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É output transforms (–ó–ê–í–ï–†–®–ï–ù–û)
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–≤–µ—Ä–Ω—É—Ç—ã—Ö/–æ—Ç–∑–µ—Ä–∫–∞–ª–µ–Ω–Ω—ã—Ö –º–æ–Ω–∏—Ç–æ—Ä–∞—Ö —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `transform: wl_output::Transform` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `OutputInfo`
  - [x] –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–æ–±—ã—Ç–∏—è `output_handle_geometry`
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `apply_output_transform()` –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —à–∏—Ä–∏–Ω—ã/–≤—ã—Å–æ—Ç—ã
  - [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `guess_output_logical_geometry()` –¥–ª—è fallback
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã `get_output_rotation()` –∏ `get_output_flipped()`
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π `apply_image_transform()`
  - [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏: `rotate_90()`, `rotate_180()`, `rotate_270()`, `flip_horizontal()`, `flip_vertical()`
  - [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `capture_region_for_output()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
  - [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π: Normal, 90¬∞, 180¬∞, 270¬∞, Flipped, Flipped90, Flipped180, Flipped270
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/render.c:130-150`, `grim/output-layout.c`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ (12/12 —Ç–µ—Å—Ç–æ–≤ passed)

### 2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É Y-invert —Ñ–ª–∞–≥–∞ (–ó–ê–í–ï–†–®–ï–ù–û)
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§–ª–∞–≥ `screencopy_frame_flags` –ø–æ–ª—É—á–∞–ª—Å—è, –Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª—Å—è
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `flags: u32` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `FrameState`
  - [x] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Event::Flags —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–ª–∞–≥–∏ –≤ FrameState
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `ZWLR_SCREENCOPY_FRAME_V1_FLAGS_Y_INVERT = 1`
  - [x] –í `capture_region_for_output()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–ª–∞–≥ Y_INVERT
  - [x] –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `flip_vertical()` –∫–æ–≥–¥–∞ —Ñ–ª–∞–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - [x] Y-invert –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï output transform (—Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Wayland)
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–æ 5 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Y-invert –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/render.c:162-164`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ (5/5 —Ç–µ—Å—Ç–æ–≤ passed)

### 3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å capture_region() –¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–∞ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã—Ö–æ–¥–æ–≤
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** `capture_region()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –≤—ã—Ö–æ–¥, –Ω–µ –∫–æ–º–ø–æ–∑–∏—Ç–∏—Ç
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –£–¥–∞–ª–∏—Ç—å –∫–æ–¥ –∑–∞—Ö–≤–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –≤—ã—Ö–æ–¥–∞ –≤ `capture_region()`
  - [ ] **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ `composite_region()`
  - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `capture_region()` –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –≤—ã—Ö–æ–¥—ã —á–µ—Ä–µ–∑ `collect_outputs_snapshot()`
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–ª–∞—Å—Ç–µ–π –Ω–∞ —Å—Ç—ã–∫–µ –º–æ–Ω–∏—Ç–æ—Ä–æ–≤
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/main.c:415-420` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `render()` –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤)
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ë–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –∫–æ–¥–∞ —É–∂–µ –µ—Å—Ç—å –≤ `composite_region()`, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ–≥–æ –≤—ã–∑–≤–∞—Ç—å

### 4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (bilinear –º–∏–Ω–∏–º—É–º)
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ nearest-neighbor (–ø–∏–∫—Å–µ–ª–∏–∑–∞—Ü–∏—è)
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –ò–∑—É—á–∏—Ç—å crate `image` –∏ `fast_image_resize` –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
  - [ ] –í `scale_image_data()` –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å bilinear filtering –¥–ª—è scale >= 0.75
  - [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å Lanczos –¥–ª—è scale < 0.75
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã `scale_image_data()` —Å –Ω—É–∂–Ω—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/render.c:172-190`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∂–µ –µ—Å—Ç—å, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

---

## üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)

### 5. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É XDG Pictures directory
- **–§–∞–π–ª:** `src/bin/grim.rs` (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ main)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –∞ –Ω–µ –≤ Pictures
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `src/xdg.rs` –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `grim.rs`
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_xdg_pictures_dir()` - –ø–∞—Ä—Å–∏–Ω–≥ `~/.config/user-dirs.dirs`
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_output_dir()` —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏: `$GRIM_DEFAULT_DIR` ‚Üí XDG_PICTURES ‚Üí `.`
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `get_output_dir()` –≤ `generate_default_filename()`
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/main.c:249-328`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–æ–≤—ã–π –∫–æ–¥, –≤ Rust —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –µ–≥–æ –Ω–µ—Ç

### 6. –£–ª—É—á—à–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- **–§–∞–π–ª:** `src/bin/grim.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Unix timestamp –≤–º–µ—Å—Ç–æ —á–∏—Ç–∞–µ–º–æ–π –¥–∞—Ç—ã
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å crate `chrono` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
  - [ ] –í `generate_default_filename()` –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ñ–æ—Ä–º–∞—Ç: `%Y%m%d_%Hh%Mm%Ss_grim.{ext}`
  - [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç: `20241004_10h30m45s_grim.png` –≤–º–µ—Å—Ç–æ `1728023456.png`
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/main.c:215-247`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏

### 7. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–∞ (grid-aligned detection)
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω—ã–π OVER mode –≤–º–µ—Å—Ç–æ –±—ã—Å—Ç—Ä–æ–≥–æ SRC
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –í `composite_region()` –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã –ª–∏ –≥—Ä–∞–Ω–∏—Ü—ã –≤—ã—Ö–æ–¥–æ–≤ –ø–æ –ø–∏–∫—Å–µ–ª—è–º
  - [ ] –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –≤—ã—Ö–æ–¥–æ–≤ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `Box::intersection()`
  - [ ] –ï—Å–ª–∏ –≥—Ä–∞–Ω–∏—Ü—ã –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã –∏ –Ω–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å
  - [ ] –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `blit_capture()` –Ω–∞–ø—Ä—è–º—É—é
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/render.c:87-116, 202-212`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `Box::intersection()`

### 8. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å guess_output_logical_geometry() fallback
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç fallback –¥–ª—è —Å–∏—Å—Ç–µ–º –±–µ–∑ xdg_output_manager
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `guess_output_logical_geometry()` –¥–ª—è OutputInfo
  - [x] –£–≥–∞–¥—ã–≤–∞—Ç—å logical —Ä–∞–∑–º–µ—Ä—ã –∏–∑ physical —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ scale
  - [x] –í—ã–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `xdg_output_manager` –≤ `refresh_outputs()`
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/output-layout.c`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤–º–µ—Å—Ç–µ —Å –∑–∞–¥–∞—á–µ–π #1, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ø–æ–ª–∏—Ä–æ–≤–∫–∞)

### 9. Lanczos2 convolution –¥–ª—è downscaling
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–∏–ª—å–Ω–æ–º —É–º–µ–Ω—å—à–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∏–∑–∫–æ–µ
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `scale_image_data()` –ø—Ä–æ–≤–µ—Ä–∫—É scale < 0.75
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Lanczos2 –∏–∑ `image` –∏–ª–∏ `fast_image_resize` crate
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –≤ match –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/render.c:178-188`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á–∏ #4

### 10. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–§–∞–π–ª:** `src/wayland_capture.rs`, `src/error.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–µ
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `Error` –≤–∞—Ä–∏–∞–Ω—Ç—ã: `TransformNotSupported`, `InvertFailed`
  - [ ] –£–ª—É—á—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –º–µ—Ç–æ–¥–∞—Ö –∑–∞—Ö–≤–∞—Ç–∞
  - [ ] –î–æ–±–∞–≤–∏—Ç—å context –∫ IO –æ—à–∏–±–∫–∞–º (–∫–∞–∫–æ–π —Ñ–∞–π–ª, –∫–∞–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ enum Error

### 11. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ–ø–∏—Å–∞–Ω–∏—è –≤—ã—Ö–æ–¥–æ–≤
- **–§–∞–π–ª:** `src/wayland_capture.rs`
- **–ü—Ä–æ–±–ª–µ–º–∞:** `output_handle_description` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `description: Option<String>` –≤ `OutputInfo`
  - [ ] –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Å–æ–±—ã—Ç–∏—è—Ö `WlOutput::Description` –∏ `ZxdgOutputV1::Description`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—É–±–ª–∏—á–Ω—ã–π `Output` struct –≤ `src/lib.rs`
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å:** `grim/main.c:104-107`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

### 12. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è transform –∏ –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–∞ (–ó–ê–í–ï–†–®–ï–ù–û)
- **–§–∞–π–ª:** `tests/test.rs`
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - [x] –°–æ–∑–¥–∞–Ω—ã –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è transforms (8 —Ç–µ—Å—Ç–æ–≤)
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è –ª–æ–≥–∏–∫–∏ —Å–º–µ–Ω—ã —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞—Ö
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è multi-output —Å —Ä–∞–∑–Ω—ã–º–∏ transforms
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è logical geometry —Å scale –∏ transform
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ transform –≤ –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è application —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è flipped —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
  - [x] –¢–µ—Å—Ç—ã –¥–ª—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç —É–≥–ª–æ–≤ –ø–æ–≤–æ—Ä–æ—Ç–∞
- **–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
  - [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è Y-invert –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞ #2)
  - [ ] –ú–æ–∫-—Ç–µ—Å—Ç—ã –¥–ª—è Wayland –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 12 —Ç–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç (12/12 passed)

---

## üìã –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

1. **#3** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å capture_region (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)
2. **#1** - Output transforms (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏)
3. **#2** - Y-invert (–±—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è)
4. **#4** - Bilinear –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞)
5. **#6** - –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (UX —É–ª—É—á—à–µ–Ω–∏–µ)
6. **#5** - XDG –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (UX —É–ª—É—á—à–µ–Ω–∏–µ)
7. **#7** - Grid-aligned –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
8. **#8** - Fallback –¥–ª—è xdg_output
9. **#9-12** - –ü–æ–ª–∏—Ä–æ–≤–∫–∞ –ø–æ –∂–µ–ª–∞–Ω–∏—é

---

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å

- [x] –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 2/4 (50%)
  - [x] #1 Output transforms - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (100%)
  - [x] #2 Y-invert —Ñ–ª–∞–≥ - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (100%)
  - [ ] #3 –ò—Å–ø—Ä–∞–≤–∏—Ç—å capture_region
  - [ ] #4 –£–ª—É—á—à–µ–Ω–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 1/4 (25%)
  - [ ] #5 XDG Pictures directory
  - [ ] #6 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
  - [ ] #7 Grid-aligned –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  - [x] #8 guess_output_logical_geometry fallback
- [x] –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 1/4 (25%)
  - [ ] #9 Lanczos2 convolution
  - [ ] #10 –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  - [ ] #11 –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –≤—ã—Ö–æ–¥–æ–≤
  - [x] #12 –¢–µ—Å—Ç—ã –¥–ª—è transform - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 4/12 –∑–∞–¥–∞—á (~33%)

**–¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ output transforms
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏: get_output_rotation(), get_output_flipped()
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: rotate_90/180/270, flip_horizontal/vertical
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ capture_region_for_output() —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ 12 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è transforms (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 8 —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π Wayland
- ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ Y-invert —Ñ–ª–∞–≥–∞**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ flags –≤ FrameState**
- ‚úÖ **Y-invert –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ transform**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ 5 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Y-invert (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)**

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–¥–∞—á–∞ #3 - –ò—Å–ø—Ä–∞–≤–∏—Ç—å capture_region (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ composite_region)
